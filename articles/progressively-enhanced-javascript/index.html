<!DOCTYPE HTML>
<html dir="ltr" lang="en">
	<head>
	    
	
		<title>Progressively enhanced Javascript by Adam Silver</title>
	


<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="initial-scale=1.0">
<meta name="Author" content="Adam Silver">

<link rel="apple-touch-icon" sizes="57x57" href="https://adamsilver.io/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://adamsilver.io/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://adamsilver.io/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://adamsilver.io/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://adamsilver.io/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://adamsilver.io/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://adamsilver.io/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://adamsilver.io/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://adamsilver.io/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="https://adamsilver.io/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://adamsilver.io/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="https://adamsilver.io/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://adamsilver.io/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="https://adamsilver.io/manifest.json">
<link rel="mask-icon" href="https://adamsilver.io/safari-pinned-tab.svg" color="#001f3f">
<meta name="msapplication-TileColor" content="#001F3F">
<meta name="msapplication-TileImage" content="https://adamsilver.io/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">

<meta property="og:locale" content="en_GB">
<meta property="og:type" content="website">


	
		<meta content="Progressively enhanced Javascript by Adam Silver" property="og:title">
	



	<meta property="og:description" content="Using Javascript to design progressively enhanced interfaces is probably the most important and misunderstood subject in web development. Find out why and what you can do about it in this article.">


<meta property="og:url" content="https://adamsilver.io/articles/progressively-enhanced-javascript/">
<meta property="og:site_name" content="Adamsilver.io">
<meta property="og:image" content="https://adamsilver.io/assets/img/card.png">
<meta property="og:image:width" content="181">
<meta property="og:image:height" content="181">

<meta name="twitter:card" content="summary">


	<meta name="twitter:description" content="Using Javascript to design progressively enhanced interfaces is probably the most important and misunderstood subject in web development. Find out why and what you can do about it in this article.">


<meta name="twitter:title" content="Progressively enhanced Javascript -  Adam Silver: interaction designer and interface developer from London, UK">


	<meta content="Progressively enhanced Javascript" name="twitter:title">


<meta name="twitter:site" content="@adambsilver">
<meta name="twitter:creator" content="@adambsilver">
<meta property="twitter:image" content="https://adamsilver.io/assets/img/card.png">


	<meta itemprop="description" content="Using Javascript to design progressively enhanced interfaces is probably the most important and misunderstood subject in web development. Find out why and what you can do about it in this article.">


<!-- build:css /assets/css/main.min.css -->
<link rel="stylesheet" href="/assets/css/main.css" type="text/css" media="all">
<!-- endbuild -->

<!-- build:css /assets/css/ie8.min.css -->
<!--[if IE 8]>
<link rel="stylesheet" href="/assets/css/ie8.css" type="text/css" media="all">
<![endif]-->
<!-- endbuild -->

<!-- build:css /assets/css/ie7.min.css -->
<!--[if IE 7]>
<link rel="stylesheet" href="/assets/css/ie7.css" type="text/css" media="all">
<![endif]-->
<!-- endbuild -->


<!-- build:css /assets/css/ie6.min.css -->
<!--[if IE 6]>
<link rel="stylesheet" href="/assets/css/ie6.css" type="text/css" media="all">
<![endif]-->
<!-- endbuild -->


<link rel="canonical" href="https://adamsilver.io/articles/progressively-enhanced-javascript/">
<link rel="author" href="https://plus.google.com/u/0/+AdamSilver1">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47311666-1', 'auto');
  ga('send', 'pageview');

</script>

	</head>
	<body>
	  <!-- <header role="banner">
	<a href="/"><img src="/assets/img/logo2.png" alt="Home" width="100"></a>
</header> -->
	<nav class="nav">
	<ul>
		<li><a class="" href="/">Home</a></li>
		<li><a class="nav-active" href="/articles/">Articles</a></li>
		<li><a class="" href="/about/">About</a></li>
		<li><a class="" href="/signup/">Newsletter</a></li>
	</ul>
</nav>
	  <main class="mainContent">
			<h1 class="article-heading">Progressively enhanced Javascript</h1>
	      <p>Using Javascript to design progressively enhanced interfaces is probably the most important yet, misunderstood subject in web development.</p>

<p>In this article we’ll discuss these misunderstandings. Then, we’ll explore long-forgotten techniques that have stood the test of time.</p>

<blockquote>
  <p>“The problems we have with websites are ones we create ourselves”
<br />— <cite>Motherfuckingwebsite.com</cite></p>
</blockquote>

<p>By default, the web is accessible to everyone. That’s the web’s super power. It’s us lot that take this natural super power and lace it with kryptonite, hurting users in the process.</p>

<p>Most of us care about users, but we also fail in the execution of that intent. Before we get to why, let’s first define progressive enhancement.</p>

<p>Progressive enhancement first gives everyone a useful experience; Then, where necessary, it lets us create a better, enhanced experience for users using a more capable browser.</p>

<p>We don’t seem to know how to write Javascript in a progressively enhanced way.</p>

<h2 id="progressive-enhancement-myths">Progressive enhancement myths</h2>

<p>While there are many <a href="http://www.sitepoint.com/javascript-dependency-backlash-myth-busting-progressive-enhancement/">myths about progressive enhancement</a> I want to point out two in particular.</p>

<p>First, unobstrusive Javascript (placing Javascript in external files), does not, in anyway, mean it’s progressively enhanced.</p>

<p>Second, this is not about people who disable Javascript. Yes, some people do disable it but it’s not the main problem. <a href="http://kryogenix.org/code/browser/everyonehasjs.html">Everyone has Javascript, Right?</a> shows the many points of failure.</p>

<p>The last of those points—<em>using Javascript that the browser doesn’t recognise</em>—is what we need to discuss. Javascript—unlike HTML and CSS—doesn’t degrade gracefully without intervention.</p>

<p>For example, <code>&lt;input type="email"&gt;</code> degrades gracefully into a text box. And <code>border-radius</code> degrades gracefully by not showing rounded corners. No problem.</p>

<p>Javascript, however, will error when the browser tries to execute code it doesn’t recognise. Internet Explorer 8, for example, breaks on the last line here:</p>

<pre><code>var form = document.forms[0];
form.attachEvent('submit', function() {
  window.event.returnValue = false;
  var foos = document.getElementsByClassName('foo');
});
</code></pre>

<p>This is because it doesn’t recognise <code>getElementsByClassName()</code>. The page didn’t degrade nor did it fully enhance. The script intercepts the form’s submit event, but gives users a broken interface.</p>

<p>So, when the user submits the form, nothing happens. Handling submit on the client (the enhanced experience) to save a round trip is fine. Handling submit on the server (the core experience) is fine too. But the implementation above doesn’t allow for either experience.</p>

<p>Neither the browser nor the features in this example are relevant. It could be any browser and any feature. It makes no difference how new a browser is or what (cutting edge) feature it supports.</p>

<h2 id="what-shouldnt-we-do">What shouldn’t we do?</h2>

<p>It’s often easier to deduce what it is we should do, once we found out what we shouldn’t. Let’s do that now.</p>

<h3 id="dont-ignore-the-problem-exists">1. Don’t ignore the problem exists</h3>

<p>I struggled a lot with this. I always thought about the current set of browsers that a particular project adheres to. But just because I ignored users who use ‘other’ browsers, doesn’t mean they don’t exist.</p>

<h3 id="dont-abdicate-responsibility">2. Don’t abdicate responsibility</h3>

<p>When we add a third-party script to the project, it becomes our responsibility. We should check under the hood for quality and watch out for the typical <a href="https://gist.github.com/david-mark/06b9879f963ebb0eed62">multi-browser approach</a> that opposes the principles of progressive enhancement.</p>

<p>Moreover, when a library releases a new version, they often drop support for various browsers. This is a never ending cycle. This is what Jeremy Keith calls the <a href="https://adactio.com/journal/6692">continuum</a>.</p>

<h3 id="dont-rely-on-cutting-the-mustard">3.Don’t rely on Cutting The Mustard</h3>

<p><a href="http://responsivenews.co.uk/post/18948466399/cutting-the-mustard">Cutting The Mustard</a> (CTM) is a relatively new approach which promises reliability by giving users a core or an enhanced experience. It’s intent is great but the implementation falls a little short.</p>

<pre><code>if(document.querySelector &amp;&amp; window.addEventListener &amp;&amp; window.localStorage) {
  // start application
}
</code></pre>

<p>The script detects a few choice methods, to then infer that the browser is ‘modern’. This is impossible because of the vast amount of new (versions of) browsers being released every day. And it’s irrelevant because the release date doesn’t determine capability.</p>

<p>If the check passes, the application starts and attempts to give users the enhanced experience. Inferences are almost as frail as user agent sniffing, something that Richard Cornford explains in <a href="http://jibbering.com/faq/notes/detect-browser/">Browser Detection and What To Do Instead</a>.</p>

<p>CTM has the following problems:</p>

<ul>
  <li>Detecting host objects this way is dangerous. <a href="http://www.cinsoft.net/host.html">H is for Host</a> explains why and provides a robust alternative.</li>
  <li>Merely detecting the existence of a method is not enough.  Nicholas Zakas’ <a href="http://chimera.labs.oreilly.com/books/1234000001655/index.html">The Problem with Native JavaScript APIs</a> demonstrates this. Peter Michaux’s article <a href="http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting">Feature Detection: State of the Art Browser Scripting</a> explains this further.</li>
  <li>It unnecessarily gives users the degraded experience. For example, due to the detection of a few choice ‘modern’ methods, it excludes Internet Explorer 8 (or 6 for that matter) from giving users client-side form validation even though these browsers are perfectly capable of providing a fast experience.</li>
  <li>CTM often relies on polyfills. <a href="/articles/the-disadvantages-of-javascript-polyfills/">Polyfills are problematic</a> in their own right. But if CTM needs polyfills, it shows that on its own the technique isn’t robust.</li>
  <li>The condition needs constant maintenance as vendors release new browsers. We shouldn’t have to update scripts when new browsers come out. We should revolve our scripts around features, not browsers.</li>
  <li>It’s unreliable because if the application uses a method that is not within the condition, then there’s a high risk of exposing a broken interface.</li>
</ul>

<h2 id="what-is-the-solution">What is the solution?</h2>

<p>Jeremy Keith says “I’ve always maintained that, given the choice between making something my problem, and making something the user’s problem, I’ll choose to make it my problem every time.”</p>

<p>To give users a core experience, we must ensure the interface works without Javascript. This is because that’s the experience users will get when the browser doesn’t recognise some method.</p>

<p>Then we must detect, and where necessary, test <em>all</em> of the features the application references before the application uses them. This ensures the page doesn’t end up half enhanced and therefore irrevocably broken.</p>

<p>To do this reliably we need to use wrappers (facades). The library should expose a dynamic API that adapts to the browser, something like this:</p>

<pre><code>if(hasFeatures('find', 'addListener', 'storeValue')) {
  var el = find('.whatever');
  addListener(el, "click", function() {
    storeValue('key', 'value');
  });
}
</code></pre>

<h3 id="notes">Notes</h3>

<ul>
  <li>It looks remarkably similar to CTM. The difference is that it doesn’t reference browser methods directly. Facades are leaner and context specific, allowing the library to fix bugs enabling us to reliably enhance an interface.</li>
  <li>There’s a one-to-one mapping between what’s in the condition and what the application uses. If the condition doesn’t pass, the user gets the core experience.</li>
  <li>There’s no need for polyfills. The library provides the method or it doesn’t, depending on the browser. No caveats.</li>
  <li>The application logic is decoupled from the browser.</li>
</ul>

<h2 id="a-dynamic-api">A dynamic API</h2>

<p>Peter Michaux’s <a href="http://peter.michaux.ca/articles/cross-browser-widgets">Cross-Browser Widgets</a> has a detailed walk-through, but let’s create a little something now.</p>

<p>Let’s say our application needs to add a class to an element. First we’ll create that function and expose a dynamic API:</p>

<pre><code>// use isHostMethod
if(document.documentElement.classList.add) {
var addClass = function(el, className) {
  return el.classList.add(className);
};
}
</code></pre>

<p>Then the calling application checks <code>addClass()</code> is defined before referencing it:</p>

<pre><code>if(addClass) {
  addClass(el, 'thing');
}
</code></pre>

<p>The application is blissfully unaware that it only runs in browsers supporting <code>classList()</code>. Users using Internet Explorer 9 and below get the degraded experience and that’s okay. If you want to support Internet Explorer 9, add a fork like this:</p>

<pre><code>var addClass;

// Use isHostMethod
if(document.documentElement.classList.add) {
addClass = function(el, className) {
  return el.classList.add(className);
};
} else if(typeof html.className === "string") {
addClass = function(el, className) {
  var re;
  if (!el.className) {
    el.className = className;
  } else {
    re = new RegExp('(^|\\s)' + className + '(\\s|$)');
    if (!re.test(el.className)) {
      el.className += ' ' + className;
    }
  }
}
}
</code></pre>

<p>This implementation supports almost every browser and the application didn’t need to change. In future you can remove this fork once the number of visitors diminishes to a suitable level—something only you can determine.</p>

<p>Either way, users get a working experience, proving that a library never needs to drop browser support, at least not in the traditional sense.</p>

<h2 id="summary">Summary</h2>

<p>Progressive enhancement puts users first. Misunderstanding the application of progressive enhancement puts users last.</p>

<p>Progressive enhancement is not more work, it’s less work. We don’t have to endlessly play catch up with browsers. We don’t have to give users a broken experience.</p>

<p>Instead we can write backwards-compatible and future-proof code that creates robust and <a href="/articles/designing-inclusively/">inclusive experiences</a> for everyone.</p>

<!--

Cornford:
The combination of the facts that it is impossible to determine which browser is executing the script, and that it is impossible to be familiar with all browser DOMs can be rendered insignificant by using feature detection to match code execution with any browser's ability to support it. But there is still going to be a diversity of outcomes, ranging from total failure to execute any scripts (on browsers that do not support javascript, or have it disabled) to full successful execution on the most capable javascript enabled browsers.

Veal:
I would add - and with a mobile connection you have no choice but to use the proxy because that is the way the network is configured. They are not as open as your home broadband and companies often employ a proxy to save bandwidth, and again you cannot avoid this


	if(document.querySelector && window.addEventListener && window.localStorage) {
	    // application that uses other APIs

	    window.addEventListener("load", function(e) {
	        // FAIL = ANOTHER FUCK YOU
	        var matches = window.matchMedia(...);
	        // ...other stuff...
	    }, false);
	}

The idea of abstractions are good, the idea of several abstractions i.e. a library, is also good. But if that library is monolithic in nature, context-less, lacks feature detection and feature testing, leans on polyfills (or browser sniffing or object inferences etc) and does **not** expose a dynamic API, then ultimately you are unable to Progressively Enhance your application and your users and the business you work for, will suffer for it.

At the very least, it is beneficial to be able to spot code that does not conform to the principles of Progressive Enhancement. Particularly, the kind that doesn't even attempt to degrade gracefully in the face of danger.

This example will also demonstrate that Progressive Enhancement is not a drag in the way of "having to support old irrelevant browsers". Quite the opposite in-fact. The words "drops support for" changes to "degrades gracefully in". You also get to determine an appropriate degradation point suitable for your project.

-->

	  </main>
		<div class="signUpHero">
	<p class="signUpHero-description">I write articles like this and share them with my private mailing list. No spam and definitely no popups. Just one article a month, straight to your inbox. Sign up below:</p>
</div>

<div class="subscribeForm">
	<form action="//adamsilver.us9.list-manage.com/subscribe/post?u=b8fb04f39bf86109693e00ba5&amp;id=441c045a36" method="post">
		<input type="hidden" name="b_b8fb04f39bf86109693e00ba5_441c045a36" value="">
		<input type="hidden" name="SITE" value="https://adamsilver.io">
		<input type="hidden" name="LOCATION" value="/articles/progressively-enhanced-javascript/">
		<label for="mce-EMAIL" class="subscribeForm-label">Your email address</label>
		<input type="email" name="EMAIL" id="mce-EMAIL" class="subscribeForm-email" required><input class="subscribeForm-button" type="submit" value="Join 1,000+ others" name="subscribe">
	</form>
</div>
	</body>
</html>