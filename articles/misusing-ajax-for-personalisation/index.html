<!DOCTYPE HTML>
<html dir="ltr" lang="en">
	<head>
	    <title>Misusing AJAX for personalisation | Adam Silver, specialising in UX, Front-end Engineering and Strategy, London, UK.</title>
	    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="initial-scale=1.0">
<meta name="Author" content="Adam Silver">

<link rel="apple-touch-icon" sizes="57x57" href="http://adamsilver.io/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="http://adamsilver.io/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="http://adamsilver.io/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="http://adamsilver.io/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="http://adamsilver.io/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="http://adamsilver.io/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="http://adamsilver.io/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="http://adamsilver.io/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://adamsilver.io/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="http://adamsilver.io/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="http://adamsilver.io/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="http://adamsilver.io/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="http://adamsilver.io/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="http://adamsilver.io/manifest.json">
<link rel="mask-icon" href="http://adamsilver.io/safari-pinned-tab.svg" color="#001f3f">
<meta name="msapplication-TileColor" content="#001F3F">
<meta name="msapplication-TileImage" content="http://adamsilver.io/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">

<meta property="og:locale" content="en_GB">
<meta property="og:type" content="website">


	<meta content="Misusing AJAX for personalisation" property="og:title">



	<meta property="og:description" content="Sometimes developers are on a pursuit to reduce page-load time by utilising AJAX to get around personalised content. This is problematic.">


<meta property="og:url" content="http://adamsilver.io/articles/misusing-ajax-for-personalisation/">
<meta property="og:site_name" content="Adamsilver.io">
<meta property="og:image" content="http://adamsilver.io/assets/img/card.png">
<meta property="og:image:width" content="181">
<meta property="og:image:height" content="181">

<meta name="twitter:card" content="summary">


	<meta name="twitter:description" content="Sometimes developers are on a pursuit to reduce page-load time by utilising AJAX to get around personalised content. This is problematic.">


<meta name="twitter:title" content="Misusing AJAX for personalisation -  Adam Silver, specialising in UX, Front-end Engineering and Strategy, London, UK.">


	<meta content="Misusing AJAX for personalisation" name="twitter:title">


<meta name="twitter:site" content="@adambsilver">
<meta name="twitter:creator" content="@adambsilver">
<meta property="twitter:image" content="http://adamsilver.io/assets/img/card.png">


	<meta itemprop="description" content="Sometimes developers are on a pursuit to reduce page-load time by utilising AJAX to get around personalised content. This is problematic.">


<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i|PT+Serif:400,400i,700,700i" rel="stylesheet">

<link rel="stylesheet" href="/assets/css/main.min.499b07af.css" media="all">

<!--[if IE 8]>
<link rel="stylesheet" href="/assets/css/ie8.min.d41d8cd9.css" media="all">
<![endif]-->

<!--[if IE 7]>
<link rel="stylesheet" href="/assets/css/ie7.min.d41d8cd9.css" media="all">
<![endif]-->


<!--[if IE 6]>
<link rel="stylesheet" href="/assets/css/ie6.min.2d22a25b.css" media="all">
<![endif]-->


<link rel="canonical" href="http://adamsilver.io/articles/misusing-ajax-for-personalisation/">
<link rel="author" href="https://plus.google.com/u/0/+AdamSilver1">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47311666-1', 'auto');
  ga('send', 'pageview');

</script>

	</head>
	<body>
	    <nav class="nav">
	<ul>
		<li><a class="" href="/">Home</a></li>
		<li><a class="nav-active" href="/articles/">Articles</a></li>
		<li><a class="" href="/about/">About</a></li>
		<li><a class="" href="/signup/">Newsletter</a></li>
	</ul>
</nav>
	    <main class="mainContent">
			<h1>Misusing AJAX for personalisation</h1>
	        <p>Sometimes developers are on a pursuit to reduce page-load time by utilising <a href="https://developer.akamai.com/stuff/Caching/Content_Caching.html">content caching</a>. UX is improved because page response times are much faster.</p>

<p>When the page contains personalised content, this type of caching can’t neccessarily be used because a user might receive the cached version of somebody elses personalised content.</p>

<p>Problems arise when AJAX is used to make an additional request for personalised content. Before discussing the problems, let’s first define what is personalised content?</p>

<h2 id="what-is-personalised-content">What is personalised content?</h2>

<p>Personalised content is any content that is specific to a user. The most basic example would be a “Logout” link because the page knows that <em>you</em> are logged in and that <em>you</em> may want to logout.</p>

<p>With that said, this can be cached because you can create two types of cached pages. What I mean is: anonymous users can receive a <em>logged-out</em> cached page and logged-in users can get a <em>logged-in</em> cached page.</p>

<p>An example that doesn’t scale and makes content-caching redundant is when personalised content includes something specific to an individual user. A good example would be their name such as a ‘Welcome Bob’ message.</p>

<p>What are the problems with this?</p>

<h2 id="the-architecture-becomes-needlessly-complex">1. The architecture becomes needlessly complex.</h2>

<p>What seems like a simple use of AJAX has a significant effect on architecture…</p>

<p>Is there one extra request for personalised content or multiple?
<br />Do you serve it as JSON and then parse that on the client?
<br />How do you organise your scripts for this?
<br />How do you organise the view partials for this on the server?
<br />At what point is personalised content not essential to the UX and how does that affect architecture?</p>

<h2 id="poor-experience-for-some-people">2. Poor experience for some people.</h2>

<p>If the user doesn’t have Javascript (or they have it but not the capability to make AJAX requests, traverse or manipulate the Document etc) they will be unable to use this functionality. This goes against the principle of Progressive Enhancement and is completely against the spirit of the web. And in the case of “logging out” this would obviously be a poor decision.</p>

<p>Furthermore, extra effort would be required to ensure the injected content is accessibile to screen readers. This alone is reason enough to realise this is an unacceptable technical solution.</p>

<h2 id="replacing-browser-behaviour-degrades-the-experience">3. Replacing browser behaviour degrades the experience.</h2>

<p>Christian Heilmann rightly says that <a href="http://www.smashingmagazine.com/2010/02/10/some-things-you-should-know-about-ajax/">AJAX shouldn’t break the web</a> and using it in this way is doing just that. He also highlights that when AJAX is used, it is important to remember how much the browser does for free, that subtly goes unnoticed. This includes displaying a loading indicator with progress bar as well as handling page not found and timeout errors.</p>

<p>Utilising AJAX and content-caching like this, means the page is only half loaded and half rendered at which point, and sometime later, the personalised content is injected. The UX is likely to be at least a little jarring as the page fills in the gaps.</p>

<p>Solutions may include loading spinners, hiding content and transitions but in reality they are far from perfect. Also, the user may not see the various updates as they are busy interacting further down the page. This is all exacabated on slower connections.</p>

<h2 id="replacing-browser-behaviour-requires-significant-man-power">4. Replacing browser behaviour requires significant man power.</h2>

<p>Extra design effort is required to cater for the aformentioned degrading in UX. Extra development effort is required to write and test script. It’s also harder to automate the functional testing and changes the way in which those tests are written.</p>

<h2 id="performance-actually-degrades">5. Performance actually degrades.</h2>

<p>Instead of having a single HTTP request that contains the entire required response there will now be multiple. The first would be for the Document containing non-personalised content. The subsequent request will be via AJAX and <em>will</em> hit your web server, therefore subject to the same latency as always.</p>

<p>The potential performance benefit is somewhat negated by requiring extra Javascript including invoking and (parsing) the JSON request, finding elements, traversing and updating the Document. All of this code adds to the page-weight slowing down the load time. There is also extra CSS required to alleviate the self-induced jarring experience. Runtime performance also degrades because injecting HTML causes reflows and repaints.</p>

<h2 id="summary">Summary</h2>

<p>Content-caching <em>is</em> a very useful technique when used responsibly and for pages that don’t contain personalised content. For pages that <em>do</em> contain personalised content, a <a href="https://blogs.akamai.com/2014/05/and-you-thought-your-page-could-not-be-cached.html">cookie check can determine whether the cached version should be served or not</a>.</p>

<p>It is ill-advised to misuse Javascript in this way as there are several negative side effects in doing so. AJAX should not break the web, it should enhance the experience where necessary. AJAX seems like an innocent and beneficial solution, but in reality it encourages bad practice that creates several self-induced problems for users and the development team.</p>

<!--

## Todo:

* https://remysharp.com/2012/04/25/mobile-battery-performance
* http://itamarst.org/writings/dynamiccaching.html
* cache invalidated means it goes to server anyway

## Comment from blog covers it off:

> I think this would be a useful technique in only special situations. It does accomplish what you want but will require multiple downloads and will make a portion of your page unaccessible to those who have disabled JS (from what I have heard that is 10% of the intenet population).

> Plus I am dubious of the savings. The reason for the caching to not have a web brower contact the website. It can just retrieve the content from cache. But if it is having to retrieve a portion of the content anyway you still have to make a HTTP request. Might as well make that response a bit bigger and get rid of the multiple requests and more complex code.

> Sounds to me like this is going a little overboard on caching. Some pages are just not designed for caching. If that is the case then implement your application to use the “If-Modified-Since” header. That way the user can make their request but get back a small response in most cases.

> I think this is premature optimization.

-->

	    </main>
		<div class="signUpHero  signUpHero-isArticle ">
	<h2 class="signUpHero-heading">Join my newsletter</h2>
	<p class="signUpHero-description">Do you love enhancing people's lives by designing and building simple and humanised experiences on the web? If yes, then you'll probably love my newsletter. Just pop your email in the box below:</p>
	<form action="//adamsilver.us9.list-manage.com/subscribe/post?u=b8fb04f39bf86109693e00ba5&amp;id=441c045a36" method="post">
		<input type="hidden" name="b_b8fb04f39bf86109693e00ba5_441c045a36" value="">
		<input type="hidden" name="SITE" value="http://adamsilver.io">
		<input type="hidden" name="LOCATION" value="/articles/misusing-ajax-for-personalisation/">
		<label for="mce-EMAIL" class="signUpHero-label">Your email address</label>
		<input type="email" name="EMAIL" id="mce-EMAIL" class="signUpHero-email" required>
		<input class="signUpHero-button" type="submit" value="Sign up" name="subscribe">
	</form>
</div>
		<footer class="footer">
	<p>Elsewhere... <!--<a href="/team/">Team</a>-->
		<a href="http://www.twitter.com/adambsilver/">Twitter</a>
		<a href="http://www.github.com/adamsilver/">Github</a>
		<a href="http://uk.linkedin.com/in/adambsilver/">Linkedin</a>
		<a href="http://medium.com/@adambsilver">Medium</a>
	</p>
</footer>
	</body>
</html>